{
 "espireDate": "N",
 "format": "text",
 "jSonReasons": [
  "lg_en"
 ],
 "key": "gqwkRR8A",
 "pasteDate": "Feb 18, 2018, 3:37:20 PM",
 "relevancy": 0.0,
 "relevant": false,
 "text": "study(title=\"SH SCMR\",  precision=0, overlay = true)\nHC = input(defval=false, title=\"-----> High Contrast. Automatic Dark Background\")\nshowPT=input(true, title=\"Show Pivots Text\", type=bool)\nshowRev=input(true, title=\"Show Confirmed Upside Reversals Text\", type=bool)\nshowDet=input(true, title=\"Show Early Detection\", type=bool)\n \n \n//Declare General Trend\n \nTL1(src, len) =>\n    weight = 3.5 / (len + 1)\n    sum = nz(sum[1]) - nz(src[len]) + src\n    ma = na(src[len]) ? na : sum/len\n    out = na(out[1]) ? ma : (src - out[1]) * weight + out[1]\n    out\nTL(src, len) =>\n    weight = 2 / (len + 1)\n    sum = nz(sum[1]) - nz(src[len]) + src\n    ma = na(src[len]) ? na : sum/len\n    out = na(out[1]) ? ma : (src - out[1]) * weight + out[1]\n    out    \n   \nTL3 = TL(low,16) - TL1(low,16)\nTL4 = percentrank(TL3, 8)\nTL5 = (TL3 < 0 and TL4 > 75) ? 1 : 0\n \n//////\n \nTH1(src, len) =>\n    weight = 3.5 / (len + 1)\n    sum = nz(sum[1]) - nz(src[len]) + src\n    ma = na(src[len]) ? na : sum/len\n    out = na(out[1]) ? ma : (src - out[1]) * weight + out[1]\n    out\nTH(src, len) =>\n    weight = 2 / (len + 1)\n    sum = nz(sum[1]) - nz(src[len]) + src\n    ma = na(src[len]) ? na : sum/len\n    out = na(out[1]) ? ma : (src - out[1]) * weight + out[1]\n    out  \n   \nTH3 = TH1(high,16) - TH(high,16)\nTH4 = percentrank(TH3, 8)\nTH5 = (TH3 > 0 and TH4 < 25) ? 1 : 0    \n \n//Bar Offsets\noffset1 = low - (low * .9998)\nh = iff(TH5, TH(high,16), TH1(high,16))\no1 = offset(h,1)\no2 = offset(h,2)\no3 = offset(h,3)\no4 = offset(h,4)\nl = iff(TL5, TL(low,16), TL1(low,16))\ni1 = offset(l,1)\ni2 = offset(l,2)\ni3 = offset(l,3)\ni4 = offset(l,4)\ni5 = offset(l,5)\n//min lows\nll1 = lowest(low,2)\nll2 = lowest(low,3)\n// Offset\nMinl = offset(ll1, 1)\nMinla = offset(ll1, 2)\nMinl2 = offset(ll2,1)\n//max highs\nhh1 = highest(high,2)\nhh2 = highest(high,3)\n// Offset\nMaxh = offset(hh1, 1)\nMaxh2 = offset(hh2,1)\nMaxh3 = offset(hh2,2)\n \n//Decisions\n//isIntra() => dayofweek > dayofweek(1) and change(dayofweek(1) = dayofweek(1,1)\nisBO() => title = \"Price Breakout\", close[3] < i3 and close[2] < i2 and close[1] < i1 and close > h\nisBD() => title = \"Price Breakdown\", close[3] > o3 and close[2] > o2 and close[1] > o1 and close < l\nisUR() => title = \"Price Pivot, Downside warning\", close[2] > o2 and close < close[1] and close < h and close > Minl2 and close < open and close < low[1]\nisBOn() => title = \"Price Broke Out, no followthrough, treat as pivot\", (close[4] < i4 and close[3] < i3 and close[2] < i2 and close[1] > o1 and close > Minl and close < high[1]) or (close[5] < i5 and close[4] < i4 and close[3] < i3 and close[2] > o2 and close < h and close[1] > Minla and close > Minl and close < high[1] and open > close)\nisUCRU() => title = \"Price UNconfirmed Reversal Up\", close[1] < i1 and close > l and close < h and close > open\nisUNCRD() => title = \"Price Pivot, Downside Bias\", (close[2] > i2 and low[1] < i1 and close[1] < i1 and high < high[1] and close < l and low > low[1] and close > close[1]) or (low[2] > i2 and low[1] < i1 and close[1] > i1 and close > low[1] and close < l) or (close[2] > i2 and close[1] < i2 and low[1] > low[2] and (close > low[1] or close > low[2]) and low > low[2] and close < l)\nisP() => title = \"Price Pivot\", (close[1] < o1 and close[2] > i2 and low[1] < i1 and close[1] > i1 and high < high[1] and high > l and (close < l or close < close[1]) and close > low[1] and open < close) or (close[4] > o4 and close[3] < i3 and close[1] > o1 and close > h and close[1] < Maxh3 and open > close and close > low[1])\n// isP2\nis5HR() => title = \"Price 5 Bar High, then reversal, 1-3 bar downside bias\", high > (Maxh2 + .01) and close < open and close[1] > o1 and close[1] > open[1] and close > l\nisUW() => title = \"Price in WEAK Uptrend\", (close[1] < o1 and close > TH(high, 16) and close < high[1])\nisUp() => title = \"Price in Uptrend\", close > TH(high,16)\nisDown() => title = \"Price in Downtrend\", close < TL(low, 16)\nisN() => title = \"Price is Neutral, no definable sequence\", (close > TL(low, 16) and close < TH(high, 16)) or close > TH(high,16) and close[1] < TL(low,16)\n \n//Plot BarColor\nbarcolor(isBO() ? yellow : isBD() ? purple : isUR() ? orange : isBOn() ? olive : isUCRU() ? #0066FF : isUNCRD() ? #FF00FF : isP() ? #FF00FF : is5HR() ? #758A0A : isUW() ? green : isUp() ? lime : isDown() ? red : isN() ? #9FB4B4 : na)\n \n \n//Condition Offsets\nPiv = isUR() or isBOn() or isP() or isUNCRD()\nRevUp = (offset(isUCRU(), 1) and close > high[1]) or\n    (offset(isUCRU(), 2) and close[1] <= high[2] and close[1] > low[1] and low[1] > Minl2 and close > high[2])\nRevX = (((offset(isUCRU(), 2) and close[1] > high[2] and close < open and (high < high[1] or close < high[2])) or\n    (offset(isUCRU(), 3) and close[2] > high[3] and close[1] > high[3] and close[1] > lowest(low,3) and low[2] > low[4] and (open > close and low < open[2] and low < open[3])) or\n    (offset(isUCRU(), 3) and close[2] <= high[3] and close[1] > high[3] and close[1] > lowest(low,3) and low[2] > low[4])) and (high <= high[1] or (open > close and low < max(open[2], close[2]))))\n   \nRevX1 = offset(RevX, 1)\nRevX2 = offset(RevX, 2)\nRevX3 =  ((close[5] > i5 and close[4] < i4 and close[3] > i3) and offset(isUCRU(), 3) and close[2] > high[3] and close[1] < open[1] and (high[1] < high[2] or close[1] < high[3] or low < high[3]))\nRevXX = (RevX1 or RevX2 or RevX3) and (close > high[2] and close > high[3])\n \n//Define Warning\nEarly = abs((close[3] > open[3] and close[2] > open[2] and close[1] > open[1] and close < open) or\n    (close[3] > open[3] and close[2] > open[2] and close[1] < open[1] and close > open) or\n    (close[3] > open[3] and close[2] < open[2] and close[1] > open[1] and close > open) or\n    (close[3] < open[3] and close[2] > open[2] and close[1] > open[1] and close > open) or\n    (close[3] > open[3] and close[2] > open[2] and close[1] > open[1] and close > open))*(low*.9999525)\n \nEarlyD = abs((close[3] < open[3] and close[2] < open[2] and close[1] < open[1] and close > open) or\n    (close[3] < open[3] and close[2] < open[2] and close[1] > open[1] and close < open) or\n    (close[3] < open[3] and close[2] > open[2] and close[1] < open[1] and close < open) or\n    (close[3] > open[3] and close[2] < open[2] and close[1] < open[1] and close < open) or\n    (close[3] < open[3] and close[2] < open[2] and close[1] < open[1] and close < open))*(high*1.00009525)\n \nEarlyTd = abs(close > TL(low, 16) and close < l)*(low*.9999525)\nEarlyTu = abs(close < TH(high, 16) and close > h)*(high*1.00009525)\n \n \n//Plot Background\nbgcolor(HC ? #1A1A1A : na)\n \n//CharacterText\nplotchar(showDet ? Early : na, char='', location=location.absolute, color=lime, transp = 70)\nplotchar(showDet ? EarlyD : na, char='', location=location.absolute, color=red, transp = 70)\nplotchar(showDet ? EarlyTd : na, char='', location=location.absolute, color=red)\nplotchar(showDet ? EarlyTu : na, char='', location=location.absolute, color=lime)\n \nplotchar(showPT and close > open ? Piv : na, char='P', location=location.belowbar, color=blue)\nplotchar(showPT and close < open ? Piv : na, char='P', location=location.abovebar, color=blue)\n \nplotchar(showRev ? RevUp : na, char='', location=location.belowbar, color=blue)\nplotchar(showRev ? RevX : na, char='X', location=location.abovebar, color=red)\nplotchar(showRev ? RevXX : na, char='Z', location=location.belowbar, color=green)",
 "title": "Shaohao SCMR"
}