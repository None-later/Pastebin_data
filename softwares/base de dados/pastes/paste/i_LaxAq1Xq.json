{
 "espireDate": "N",
 "format": "text",
 "jSonReasons": [
  "re_sql",
  "lg_en"
 ],
 "key": "LaxAq1Xq",
 "pasteDate": "Feb 20, 2018, 5:55:29 PM",
 "relevancy": 0.0,
 "relevant": false,
 "text": "$ psql -h db1 -U olaworker olalog_test\nWelcome to psql 8.1.0 (server 8.1.3), the PostgreSQL interactive terminal.\n\nType:  \\copyright for distribution terms\n       \\h for help with SQL commands\n       \\? for help with psql commands\n       \\g or terminate with semicolon to execute query\n       \\q to quit\n\nolalog_test=# \\d photos\n                \"public.photos\" (view)\n  |                       |  \n-----------+-----------------------------+---------------\n id        | integer                     |\n album_id  | integer                     |\n sort_id   | integer                     |\n caption   | text                        |\n timestamp | timestamp without time zone |\n uri       | character varying(255)      |\n file_size | integer                     |\n dimension | character varying(255)      |\n(View) :\n SELECT e.id, e.album_id, e.sort_id, e.caption, e.\"timestamp\", p.uri, p.file_size, p.dimension\n   FROM entries e\n   JOIN photos_data p USING (id);\n(rule):\n delete_photos AS\n    ON DELETE TO photos DO INSTEAD  DELETE FROM entries\n  WHERE entries.id = old.id\n insert_photos AS\n    ON INSERT TO photos DO INSTEAD ( INSERT INTO entries (id, \"type\", album_id, sort_id, caption, \"timestamp\")\n  VALUES (nextval('entries_id_seq'::regclass), 'Movie'::character varying, new.album_id, new.sort_id, new.caption, new.\"timestamp\");\n INSERT INTO photos_data (id, uri, file_size, dimension)\n  VALUES (currval('entries_id_seq'::regclass), new.uri, new.file_size, new.dimension);\n)\n\nolalog_test=# \\d entries\n                                   \"public.entries\" \n  |                       |                     \n-----------+-----------------------------+------------------------------------------------------\n id        | integer                     | not null default nextval('entries_id_seq'::regclass)\n type      | character varying(255)      |\n album_id  | integer                     |\n sort_id   | integer                     |\n caption   | text                        |\n timestamp | timestamp without time zone |\n:\n    \"entries_pkey\" PRIMARY KEY, btree (id)\n\nolalog_test=#       CREATE RULE update_photos AS ON UPDATE TO photos DO INSTEAD\n                    (\n\t\t      UPDATE entries\n\t\t         SET type = NEW.type, album_id = NEW.album_id, sort_id = NEW.sort_id,\n\t\t\t     caption = NEW.caption, timestamp = NEW.timestamp\n\t\t       WHERE id = OLD.id;\n\n\t\t      UPDATE photos_data\n\t\t         SET uri = NEW.uri, file_size = NEW.file_size, dimension = NEW.dimension\n\t\t       WHERE id = OLD.id;\n\t\t    );\nserver closed the connection unexpectedly\n        This probably means the server terminated abnormally\n        before or while processing the request.\n  .   : .\n!>",
 "title": ""
}