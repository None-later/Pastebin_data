{
 "espireDate": "N",
 "format": "text",
 "jSonReasons": [
  "re_us_zip_code",
  "lg_en"
 ],
 "key": "zWSnyccz",
 "pasteDate": "Feb 18, 2018, 10:25:35 AM",
 "relevancy": 1.0,
 "relevant": false,
 "text": "ackage server.model.shops;\n\nimport server.Config;\nimport server.Server;\nimport server.model.items.Item;\nimport server.model.players.Client;\n\npublic class ShopAssistant {\n\n\tprivate Client c;\n\t\n\tpublic ShopAssistant(Client client) {\n\t\tthis.c = client;\n\t}\n\t\n\t/**\n\t*Shops\n\t**/\n\t\n\tpublic void openShop(int ShopID){\n\t\tc.getItems().resetItems(3823);\n\t\tresetShop(ShopID);\n\t\tc.isShopping = true;\n\t\tc.myShopId = ShopID;\n\t\tc.getPA().sendFrame248(3824, 3822);\n\t\tc.getPA().sendFrame126(Server.shopHandler.ShopName[ShopID], 3901);\n\t}\n\n\tpublic boolean shopSellsItem(int itemID) {\n\t\tfor (int i = 0; i < Server.shopHandler.ShopItems.length; i++) {\n\t\t\tif(itemID == (Server.shopHandler.ShopItems[c.myShopId][i] - 1)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\t\n\tpublic void updatePlayerShop() {\n\t\tfor (int i = 1; i < Config.MAX_PLAYERS; i++) {\n\t\t\tif (Server.playerHandler.players[i] != null) {\n\t\t\t\tif (Server.playerHandler.players[i].isShopping == true && Server.playerHandler.players[i].myShopId == c.myShopId && i != c.playerId) {\n\t\t\t\t\tServer.playerHandler.players[i].updateShop = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t\n\tpublic void updateshop(int i){\n\t\tresetShop(i);\n\t}\n\t\n\tpublic void resetShop(int ShopID) {\n\t\tsynchronized(c) {\n\t\t\tint TotalItems = 0;\n\t\t\tfor (int i = 0; i < Server.shopHandler.MaxShopItems; i++) {\n\t\t\t\tif (Server.shopHandler.ShopItems[ShopID][i] > 0) {\n\t\t\t\t\tTotalItems++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (TotalItems > Server.shopHandler.MaxShopItems) {\n\t\t\t\tTotalItems = Server.shopHandler.MaxShopItems;\n\t\t\t}\n\t\t\tc.getOutStream().createFrameVarSizeWord(53);\n\t\t\tc.getOutStream().writeWord(3900);\n\t\t\tc.getOutStream().writeWord(TotalItems);\n \t\t\tint TotalCount = 0;\n\t\t\tfor (int i = 0; i < Server.shopHandler.ShopItems.length; i++) {\n\t\t\t\tif (Server.shopHandler.ShopItems[ShopID][i] > 0 || i <= Server.shopHandler.ShopItemsStandard[ShopID]) {\n\t\t\t\t\tif (Server.shopHandler.ShopItemsN[ShopID][i] > 254) {\n\t\t\t\t\t\tc.getOutStream().writeByte(255); \t\t\t\t\t\n\t\t\t\t\t\tc.getOutStream().writeDWord_v2(Server.shopHandler.ShopItemsN[ShopID][i]);\t\n\t\t\t\t\t} else {\n\t\t\t\t\t\tc.getOutStream().writeByte(Server.shopHandler.ShopItemsN[ShopID][i]);\n\t\t\t\t\t}\n\t\t\t\t\tif (Server.shopHandler.ShopItems[ShopID][i] > Config.ITEM_LIMIT || Server.shopHandler.ShopItems[ShopID][i] < 0) {\n\t\t\t\t\t\tServer.shopHandler.ShopItems[ShopID][i] = Config.ITEM_LIMIT;\n\t\t\t\t\t}\n\t\t\t\t\tc.getOutStream().writeWordBigEndianA(Server.shopHandler.ShopItems[ShopID][i]);\n\t\t\t\t\tTotalCount++;\n\t\t\t\t}\n\t\t\t\tif (TotalCount > TotalItems) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tc.getOutStream().endFrameVarSizeWord();\n\t\t\tc.flushOutStream();\t\n\t\t}\n\t}\n\t\n\t\n\tpublic double getItemShopValue(int ItemID, int Type, int fromSlot) {\n\t\tdouble ShopValue = 1;\n\t\tdouble Overstock = 0;\n\t\tdouble TotPrice = 0;\n\t\tfor (int i = 0; i < Config.ITEM_LIMIT; i++) {\n\t\t\tif (Server.itemHandler.ItemList[i] != null) {\n\t\t\t\tif (Server.itemHandler.ItemList[i].itemId == ItemID) {\n\t\t\t\t\tShopValue = Server.itemHandler.ItemList[i].ShopValue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tTotPrice = ShopValue;\n\n\t\tif (Server.shopHandler.ShopBModifier[c.myShopId] == 1) {\n\t\t\tTotPrice *= 1; \n\t\t\tTotPrice *= 1;\n\t\t\tif (Type == 1) {\n\t\t\t\tTotPrice *= 1; \n\t\t\t}\n\t\t} else if (Type == 1) {\n\t\t\tTotPrice *= 1; \n\t\t}\n\t\treturn TotPrice;\n\t}\n\t\n\tpublic int getItemShopValue(int itemId) {\n\t\tfor (int i = 0; i < Config.ITEM_LIMIT; i++) {\n\t\t\tif (Server.itemHandler.ItemList[i] != null) {\n\t\t\t\tif (Server.itemHandler.ItemList[i].itemId == itemId) {\n\t\t\t\t\treturn (int)Server.itemHandler.ItemList[i].ShopValue;\n\t\t\t\t}\n\t\t\t}\t\n\t\t}\n\t\treturn 0;\n\t}\n\t\n\t\n\t\n\t/**\n\t*buy item from shop (Shop Price)\n\t**/\n\t\n\tpublic void buyFromShopPrice(int removeId, int removeSlot){\n\t\tint ShopValue = (int)Math.floor(getItemShopValue(removeId, 0, removeSlot));\n\t\tShopValue *= 1;\n\t\tString ShopAdd = \"\";\n\t\tif (c.myShopId == 18) {\n\t\t\tc.sendMessage(c.getItems().getItemName(removeId)+\": currently costs \" + getSpecialItemValue(removeId) + \" EPP.\");\n\t\t\treturn;\n\t\t}\n\t\tif (c.myShopId == 73) {\n\t\t\tc.sendMessage(c.getItems().getItemName(removeId)+\": currently costs \" + getSpecialItemValue(removeId) + \" EPP.\");\n\t\t\treturn;\n\t\t}\n\t\tif (c.myShopId == 74) {\n\t\t\tc.sendMessage(c.getItems().getItemName(removeId)+\": currently costs \" + getSpecialItemValue(removeId) + \" EPP.\");\n\t\t\treturn;\n\t\t}\n\t\tif (c.myShopId == 15) {\n\t\t\tc.sendMessage(\"This item current costs \" + c.getItems().getUntradePrice(removeId) + \" coins.\");\n\t\t\treturn;\n                }\n\t\tif (c.myShopId == 11) {\n\t\t\tc.sendMessage(c.getItems().getItemName(removeId)+\": currently costs \" + getSpecialItemValue(removeId) + \" DonatorPoints.\");\n\t\t\treturn;\n\t\t}\n\t\tif (c.myShopId == 48) {\n\t\t\tc.sendMessage(c.getItems().getItemName(removeId)+\": currently costs \" + getSpecialItemValue(removeId) + \" SlayerPoints.\");\n\t\t\treturn;\n\t\t}\n\t\tif (ShopValue >= 1000 && ShopValue < 1000000) {\n\t\t\tShopAdd = \" (\" + (ShopValue / 1000) + \"K)\";\n\t\t} else if (ShopValue >= 1000000) {\n\t\t\tShopAdd = \" (\" + (ShopValue / 1000000) + \" million)\";\n\t\t}\n\t\tc.sendMessage(c.getItems().getItemName(removeId)+\": currently costs \"+ShopValue+\" coins\"+ShopAdd);\n\t}\n\t\n\tpublic int getSpecialItemValue(int id) {\n\t\tswitch (id) {\n\t\t\tcase 6889:\n\t\t\tcase 6914:\n\t\t\tcase 15604:\n\t\t\tcase 15606:\n\t\t\tcase 15600:\n\t\t\tcase 15610:\n\t\t\tcase 15612:\n\t\t\tcase 15616:\n\t\t\tcase 15618:\n\t\t\tcase 13738:\n\t\t\tcase 13740:\n\t\t\tcase 13742:\n\t\t\tcase 13744:\n\t\t\treturn 100;\n\t\t\tcase 6916:\n\t\t\tcase 6918:\n\t\t\tcase 6920:\n\t\t\tcase 6922:\n\t\t\tcase 6924:\n\t\t\treturn 50;\n\t\t\tcase 11663:\n\t\t\tcase 11664:\n\t\t\tcase 11665:\n\t\t\tcase 8842:\n\t\t\tcase 13360:\n\t\t\tcase 13352:\n\t\t\tcase 13346:\n\t\t\treturn 30;\n\t\t\tcase 8839:\n\t\t\tcase 8840:\n\t\t\tcase 15602:\n\t\t\tcase 15608:\n\t\t\tcase 15614:\n\t\t\tcase 15620:\ncase 19272:\ncase 19275:\ncase 19278:\ncase 19281:\ncase 19284:\ncase 19287:\ncase 19290:\ncase 19293:\ncase 19296:\ncase 19299:\ncase 19302:\ncase 19305:\nreturn 75;\ncase 13107:\ncase 13109:\ncase 13111:\ncase 13113:\ncase 13115:\ncase 13858:\ncase 13861:\ncase 13864:\ncase 13870:\ncase 13873:\ncase 13876:\ncase 13896:\ncase 13884:\ncase 13890:\ncase 13887:\ncase 13893:\ncase 13905:\ncase 13867:\n\t\t\treturn 200;\n\t\t\tcase 19785:\n\t\t\tcase 19786:\n\t\t\tcase 19787:\n\t\t\tcase 19788:\n\t\t\tcase 19789:\n\t\t\tcase 19790:\n\t\t\treturn 150;\ncase 13883:\ncase 13879:\ncase 15332:\n\t\t\treturn 1;\n\t\t\tcase 10499:\n\t\t\treturn 20;\n\t\t\tcase 8845:\n\t\t\tcase 15018:\n\t\t\tcase 15019:\n\t\t\tcase 15020:\n\t\t\tcase 15220:\n\t\t\treturn 5;\n\t\t\tcase 8846:\n\t\t\tcase 19335:\n\t\t\treturn 10;\n\t\t\tcase 8847:\n\t\t\treturn 15;\n\t\t\tcase 8848:\n\t\t\tcase 13362:\n\t\t\tcase 13355:\n\t\t\tcase 13350:\n\t\t\treturn 20;\n\t\t\tcase 8849:\n\t\t\tcase 8850:\n\t\t\treturn 25;\n\t\t\tcase 10551:\n\t\t\tcase 10531:\n\t\t\tcase 10533:\n\t\t\tcase 10534:\n\t\t\tcase 10537:\n\t\t\tcase 13358:\n\t\t\tcase 13354:\n\t\t\tcase 13348:\n\t\t\treturn 50;\n\t\t\tcase 6570:\n\t\t\treturn 35;\n\t\t\tcase 11730:\ncase 13902:\ncase 13899:\n\t\t\treturn 300;\t\t\ncase 11696:\ncase 11698:\ncase 11700:\n\t\t\treturn 900;\n\t\t\tcase 11694:\n\t\t\treturn 950;\n\t\t\tcase 6585:\n\t\t\treturn 15;\n\t\t\tcase 15051:\n\t\t\treturn 300;\n\t\t\tcase 11235:\n\t\t\treturn 100;\n\t\t\tcase 4151:\n\t\t\treturn 75;\n\t\t\tcase 15039:\n\t\t\tcase 18349:\n\t\t\tcase 18351:\n\t\t\tcase 18353:\n\t\t\tcase 18355:\n\t\t\tcase 18357:\n\t\t\treturn 1000;\n\t\t\tcase 15272:\n\t\t\treturn 10;\n\t\t\tcase 13263:\n\t\t\treturn 400;\n\t\t\tcase 15622:\n\t\t\treturn 100;\n\t\t\t\n\t\t\t\n\t\t}\n\t\treturn 0;\n\t}\n\t\n\t\n\t\n\t/**\n\t*Sell item to shop (Shop Price)\n\t**/\n\tpublic void sellToShopPrice(int removeId, int removeSlot) {\n\t\tfor (int i : Config.ITEM_SELLABLE) {\n\n\t\t\t\n\t\t\tif (i == removeId) {\n\t\t\t\tc.sendMessage(\"You can't sell \"+c.getItems().getItemName(removeId).toLowerCase()+\".\");\n\t\t\t\treturn;\n\t\t\t} \n\n\t\t}\n\t\tboolean IsIn = false;\n\t\tif (Server.shopHandler.ShopSModifier[c.myShopId] > 1) {\n\t\t\tfor (int j = 0; j <= Server.shopHandler.ShopItemsStandard[c.myShopId]; j++) {\n\t\t\t\tif (removeId == (Server.shopHandler.ShopItems[c.myShopId][j] - 1)) {\n\t\t\t\t\tIsIn = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tIsIn = true;\n\t\t}\n\t\tif (IsIn == false) {\n\t\t\tc.sendMessage(\"You can't sell \"+c.getItems().getItemName(removeId).toLowerCase()+\" to this store.\");\n\t\t} else {\n\t\t\tint ShopValue = (int)Math.floor(getItemShopValue(removeId, 1, removeSlot));\n\t\t\tString ShopAdd = \"\";\n\t\t\tif (ShopValue >= 1000 && ShopValue < 1000000) {\n\t\t\t\tShopAdd = \" (\" + (ShopValue / 1000) + \"K)\";\n\t\t\t} else if (ShopValue >= 1000000) {\n\t\t\t\tShopAdd = \" (\" + (ShopValue / 1000000) + \" million)\";\n\t\t\t}\n\t\t\tc.sendMessage(c.getItems().getItemName(removeId)+\": shop will buy for \"+ShopValue+\" coins\"+ShopAdd);\n\t\t}\n\t}\n\t\n\t\n\t\n\tpublic boolean sellItem(int itemID, int fromSlot, int amount) {\n\t\t\tif(c.inTrade) {\n            \t\tc.sendMessage(\"You cant sell items to the shop while your in trade!\");\n           \t\treturn false;\n            \t\t}\n\t\tif (c.myShopId == 14)\n\t\t\treturn false;\n\t\tfor (int i : Config.ITEM_SELLABLE) {\n\t\t\tif (i == itemID) {\n\t\t\t\tc.sendMessage(\"You can't sell \"+c.getItems().getItemName(itemID).toLowerCase()+\".\");\n\t\t\t\treturn false;\n\t\t\t} \n\t\t}\n\t\t\n\t\tif (amount > 0 && itemID == (c.playerItems[fromSlot] - 1)) {\n\t\t\tif (Server.shopHandler.ShopSModifier[c.myShopId] > 1) {\n\t\t\t\tboolean IsIn = false;\n\t\t\t\tfor (int i = 0; i <= Server.shopHandler.ShopItemsStandard[c.myShopId]; i++) {\n\t\t\t\t\tif (itemID == (Server.shopHandler.ShopItems[c.myShopId][i] - 1)) {\n\t\t\t\t\t\tIsIn = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (IsIn == false) {\n\t\t\t\t\tc.sendMessage(\"You can't sell \"+c.getItems().getItemName(itemID).toLowerCase()+\" to this store.\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (amount > c.playerItemsN[fromSlot] && (Item.itemIsNote[(c.playerItems[fromSlot] - 1)] == true || Item.itemStackable[(c.playerItems[fromSlot] - 1)] == true)) {\n\t\t\t\tamount = c.playerItemsN[fromSlot];\n\t\t\t} else if (amount > c.getItems().getItemAmount(itemID) && Item.itemIsNote[(c.playerItems[fromSlot] - 1)] == false && Item.itemStackable[(c.playerItems[fromSlot] - 1)] == false) {\n\t\t\t\tamount = c.getItems().getItemAmount(itemID);\n\t\t\t}\n\t\t\t//double ShopValue;\n\t\t\t//double TotPrice;\n\t\t\tint TotPrice2 = 0;\n\t\t\t//int Overstock;\n\t\t\tfor (int i = amount; i > 0; i--) {\n\t\t\t\tTotPrice2 = (int)Math.floor(getItemShopValue(itemID, 1, fromSlot));\n\t\t\t\tif (c.getItems().freeSlots() > 0 || c.getItems().playerHasItem(995)) {\n\t\t\t\t\tif (Item.itemIsNote[itemID] == false) {\n\t\t\t\t\t\tc.getItems().deleteItem(itemID, c.getItems().getItemSlot(itemID), 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tc.getItems().deleteItem(itemID, fromSlot, 1);\n\t\t\t\t\t}\n\t\t\t\t\tc.getItems().addItem(995, TotPrice2);\n\t\t\t\t\taddShopItem(itemID, 1);\n\t\t\t\t} else {\n\t\t\t\t\tc.sendMessage(\"You don't have enough space in your inventory.\");\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tc.getItems().resetItems(3823);\n\t\t\tresetShop(c.myShopId);\n\t\t\tupdatePlayerShop();\n\t\t\treturn true;\n\t\t}\n\t\treturn true;\n\t}\n\t\npublic boolean addShopItem(int itemID, int amount) {\n\t\tboolean Added = false;\n\t\tif (amount <= 0) {\n\t\t\treturn false;\n\t\t}\n\t\tif (Item.itemIsNote[itemID] == true) {\n\t\t\titemID = c.getItems().getUnnotedItem(itemID);\n\t\t}\n\t\tfor (int i = 0; i < Server.shopHandler.ShopItems.length; i++) {\n\t\t\tif ((Server.shopHandler.ShopItems[c.myShopId][i] - 1) == itemID) {\n\t\t\t\tServer.shopHandler.ShopItemsN[c.myShopId][i] += amount;\n\t\t\t\tAdded = true;\n\t\t\t}\n\t\t}\n\t\tif (Added == false) {\n\t\t\tfor (int i = 0; i < Server.shopHandler.ShopItems.length; i++) {\n\t\t\t\tif (Server.shopHandler.ShopItems[c.myShopId][i] == 0) {\n\t\t\t\t\tServer.shopHandler.ShopItems[c.myShopId][i] = (itemID + 1);\n\t\t\t\t\tServer.shopHandler.ShopItemsN[c.myShopId][i] = amount;\n\t\t\t\t\tServer.shopHandler.ShopItemsDelay[c.myShopId][i] = 0;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\t\n\tpublic long buyDelay;\n\tpublic boolean buyItem(int itemID, int fromSlot, int amount) {\n\t\tif(System.currentTimeMillis() - buyDelay < 1500) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (c.myShopId == 14) {\n\t\t\tskillBuy(itemID);\n\t\t\treturn false;\n\n\t\t} else if (c.myShopId == 15) {\n\t\t\tbuyVoid(itemID);\n\t\t\treturn false;\t\t\n\t\t\n\t\t} else if (c.myShopId == 1) {\n\t\t\tbuyVoid(itemID);\n\t\t\treturn false;\n                }\n\t\tif(itemID != itemID) {\n\t\t\tc.sendMessage(\"Don't dupe or you will be IP Banned\");\n\t\t\treturn false;\n\t\t}\n\n\t\tif(!shopSellsItem(itemID))\n\t\t\treturn false;\n\n\t\tif (amount > 0) {\n\t\t\tif (amount > Server.shopHandler.ShopItemsN[c.myShopId][fromSlot]) {\n\t\t\t\tamount = Server.shopHandler.ShopItemsN[c.myShopId][fromSlot];\n\t\t\t}\n\t\t\t//double ShopValue;\n\t\t\t//double TotPrice;\n\t\t\tint TotPrice2 = 0;\n\t\t\t//int Overstock;\n\t\t\tint Slot = 0;\n\t\t\tint Slot1 = 0;//Tokkul\n\t\t\tint Slot2 = 0;//Pking Points\n\t\t\tint Slot3 = 0;//Donator Gold\n\n\t\t\tif (c.myShopId == 18) {\n\t\t\t\thandleOtherShop(itemID);\n\t\t\t\treturn false;\n\t\t\t}\t\n\t\t\tif (c.myShopId == 73) {\n\t\t\t\thandleOtherShop(itemID);\n\t\t\t\treturn false;\n\t\t\t}\t\n\t\t\tif (c.myShopId == 74) {\n\t\t\t\thandleOtherShop(itemID);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (c.myShopId == 48) {\n\t\t\t\thandleOtherShop(itemID);\n\t\t\t\treturn false;\n\t\t\t}\t\t\t\t\n\t\t\tfor (int i = amount; i > 0; i--) {\n\t\t\t\tTotPrice2 = (int)Math.floor(getItemShopValue(itemID, 0, fromSlot));\n\t\t\t\tSlot = c.getItems().getItemSlot(995);\n\t\t\t\tSlot1 = c.getItems().getItemSlot(6529);\n\t\t\t\tSlot3 = c.getItems().getItemSlot(5555);\n\t\t\t\tif (Slot == -1 && c.myShopId != 11 && c.myShopId != 29 && c.myShopId != 30 && c.myShopId != 31 && c.myShopId != 47) {\n\t\t\t\t\tc.sendMessage(\"You don't have enough coins.\");\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif(Slot1 == -1 && c.myShopId == 29 || c.myShopId == 30 || c.myShopId == 31) {\n\t\t\t\t\tc.sendMessage(\"You don't have enough tokkul.\");\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif(Slot3 == -1 && c.myShopId == 11) {\n\t\t\t\t\tc.sendMessage(\"You don't have enough DonatorPoints.\");\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\n                if(TotPrice2 <= 1) {\n                \tTotPrice2 = (int)Math.floor(getItemShopValue(itemID, 0, fromSlot));\n                \tTotPrice2 *= 1.66;\n                }\n                if(c.myShopId == 29 || c.myShopId == 30 || c.myShopId == 31) {\n                \tif (c.playerItemsN[Slot1] >= TotPrice2) {\n\t\t\t\t\t\tif (c.getItems().freeSlots() > 0) {\n\t\t\t\t\t\t\tbuyDelay = System.currentTimeMillis();\n\t\t\t\t\t\t\tc.getItems().deleteItem(6529, c.getItems().getItemSlot(6529), TotPrice2);\n\t\t\t\t\t\t\tc.getItems().addItem(itemID, 1);\n\t\t\t\t\t\t\tServer.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;\n\t\t\t\t\t\t\tServer.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;\n\t\t\t\t\t\t\tif ((fromSlot + 1) > Server.shopHandler.ShopItemsStandard[c.myShopId]) {\n\t\t\t\t\t\t\t\tServer.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tc.sendMessage(\"You don't have enough space in your inventory.\");\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tc.sendMessage(\"You don't have enough tokkul.\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n                }\n                else if(c.myShopId == 47) {\n                \tif (c.SPoints >= TotPrice2) {\n\t\t\t\t\t\tif (c.getItems().freeSlots() > 0) {\n\t\t\t\t\t\t\tbuyDelay = System.currentTimeMillis();\n\t\t\t\t\t\t\tc.SPoints -= TotPrice2;\n\t\t\t\t\t\t\tc.getItems().addItem(itemID, 1);\n\t\t\t\t\t\t\tServer.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;\n\t\t\t\t\t\t\tServer.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;\n\t\t\t\t\t\t\tif ((fromSlot + 1) > Server.shopHandler.ShopItemsStandard[c.myShopId]) {\n\t\t\t\t\t\t\t\tServer.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tc.sendMessage(\"You don't have enough space in your inventory.\");\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tc.sendMessage(\"You don't have enough Pk Points.\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n                }\n                /*else if(c.myShopId == 48) {\n                \tif (c.SPoints >= TotPrice2) {\n\t\t\t\t\t\tif (c.getItems().freeSlots() > 0) {\n\t\t\t\t\t\t\tbuyDelay = System.currentTimeMillis();\n\t\t\t\t\t\t\tc.SPoints -= TotPrice2;\n\t\t\t\t\t\t\tc.getItems().addItem(itemID, 1);\n\t\t\t\t\t\t\tServer.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;\n\t\t\t\t\t\t\tServer.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;\n\t\t\t\t\t\t\tif ((fromSlot + 1) > Server.shopHandler.ShopItemsStandard[c.myShopId]) {\n\t\t\t\t\t\t\t\tServer.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tc.sendMessage(\"You don't have enough space in your inventory.\");\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tc.sendMessage(\"You don't have enough Slayer Points.\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n                }*/\n                else if(c.myShopId == 11) {\n                \tif (c.playerItemsN[Slot3] >= TotPrice2) {\n\t\t\t\t\t\tif (c.getItems().freeSlots() > 0) {\n\t\t\t\t\t\t\tbuyDelay = System.currentTimeMillis();\n\t\t\t\t\t\t\tc.getItems().deleteItem(5555, c.getItems().getItemSlot(5555), TotPrice2);\n\t\t\t\t\t\t\tc.getItems().addItem(itemID, 1);\n\t\t\t\t\t\t\tServer.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;\n\t\t\t\t\t\t\tServer.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;\n\t\t\t\t\t\t\tif ((fromSlot + 1) > Server.shopHandler.ShopItemsStandard[c.myShopId]) {\n\t\t\t\t\t\t\t\tServer.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tc.sendMessage(\"You don't have enough space in your inventory.\");\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tc.sendMessage(\"You don't have enough DonatorPoints.\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n                }\n                else if(c.myShopId != 11 && c.myShopId != 29 || c.myShopId != 30 || c.myShopId != 31 || c.myShopId != 47) {\n\t\t\t\t\tif (c.playerItemsN[Slot] >= TotPrice2) {\n\t\t\t\t\t\tif (c.getItems().freeSlots() > 0) {\n\t\t\t\t\t\t\tbuyDelay = System.currentTimeMillis();\n\t\t\t\t\t\t\tc.getItems().deleteItem(995, c.getItems().getItemSlot(995), TotPrice2);\n\t\t\t\t\t\t\tc.getItems().addItem(itemID, 1);\n\t\t\t\t\t\t\tServer.shopHandler.ShopItemsN[c.myShopId][fromSlot] -= 1;\n\t\t\t\t\t\t\tServer.shopHandler.ShopItemsDelay[c.myShopId][fromSlot] = 0;\n\t\t\t\t\t\t\tif ((fromSlot + 1) > Server.shopHandler.ShopItemsStandard[c.myShopId]) {\n\t\t\t\t\t\t\t\tServer.shopHandler.ShopItems[c.myShopId][fromSlot] = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tc.sendMessage(\"You don't have enough space in your inventory.\");\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tc.sendMessage(\"You don't have enough coins.\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n                }\n\t\t\t}\n\t\t\tc.getItems().resetItems(3823);\n\t\t\tresetShop(c.myShopId);\n\t\t\tupdatePlayerShop();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\t\n\t\n\t\tpublic void handleOtherShop(int itemID) {\n\n\t\t\tif (c.myShopId == 18) {\n\t\t\t\tif (c.SPoints >= getSpecialItemValue(itemID)) {\n\t\t\t\t\tif (c.getItems().freeSlots() > 0){\n\t\t\t\t\t\tc.SPoints -= getSpecialItemValue(itemID);\n\t\t\t\t\t\tc.getItems().addItem(itemID,1);\n\t\t\t\t\t\tc.getItems().resetItems(3823);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tc.sendMessage(\"You do not have enough EPP points to buy this item.\");\t\t\t\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tif (c.myShopId == 11) {\n\t\t\t\tif (c.donPoints >= getSpecialItemValue(itemID)) {\n\t\t\t\t\tif (c.getItems().freeSlots() > 0){\n\t\t\t\t\t\tc.donPoints -= getSpecialItemValue(itemID);\n\t\t\t\t\t\tc.getItems().addItem(itemID,1);\n\t\t\t\t\t\tc.getItems().resetItems(3823);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tc.sendMessage(\"You dont have enough DonatorPoints to buy this item!\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (c.myShopId == 73) {\n\t\t\t\tif (c.SPoints >= getSpecialItemValue(itemID)) {\n\t\t\t\t\tif (c.getItems().freeSlots() > 0){\n\t\t\t\t\t\tc.SPoints -= getSpecialItemValue(itemID);\n\t\t\t\t\t\tc.getItems().addItem(itemID,1);\n\t\t\t\t\t\tc.getItems().resetItems(3823);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tc.sendMessage(\"You do not have enough PK points to buy this item.\");\t\t\t\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tif (c.myShopId == 74) {\n\t\t\t\tif (c.SPoints >= getSpecialItemValue(itemID)) {\n\t\t\t\t\tif (c.getItems().freeSlots() > 0){\n\t\t\t\t\t\tc.SPoints -= getSpecialItemValue(itemID);\n\t\t\t\t\t\tc.getItems().addItem(itemID,1);\n\t\t\t\t\t\tc.getItems().resetItems(3823);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tc.sendMessage(\"You do not have enough PK points to buy this item.\");\t\t\t\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tif (c.myShopId == 48) {\n\t\t\t\tif (c.SPoints >= getSpecialItemValue(itemID)) {\n\t\t\t\t\tif (c.getItems().freeSlots() > 0){\n\t\t\t\t\t\tc.SPoints -= getSpecialItemValue(itemID);\n\t\t\t\t\t\tc.getItems().addItem(itemID,1);\n\t\t\t\t\t\tc.getItems().resetItems(3823);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tc.sendMessage(\"You do not have enough SlayerPoints to buy this item.\");\t\t\t\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t\t\n\t\tpublic void openSkillCape() {\n\t\t\tint capes = get99Count();\n\t\t\tif (capes > 1)\n\t\t\t\tcapes = 1;\n\t\t\telse\n\t\t\t\tcapes = 0;\n\t\t\tc.myShopId = 14;\n\t\t\tsetupSkillCapes(capes, get99Count());\t\t\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t/*public int[][] skillCapes = {{0,9747,4319,2679},{1,2683,4329,2685},{2,2680,4359,2682},{3,2701,4341,2703},{4,2686,4351,2688},{5,2689,4347,2691},{6,2692,4343,2691},\n\t\t\t\t\t\t\t\t\t{7,2737,4325,2733},{8,2734,4353,2736},{9,2716,4337,2718},{10,2728,4335,2730},{11,2695,4321,2697},{12,2713,4327,2715},{13,2725,4357,2727},\n\t\t\t\t\t\t\t\t\t{14,2722,4345,2724},{15,2707,4339,2709},{16,2704,4317,2706},{17,2710,4361,2712},{18,2719,4355,2721},{19,2737,4331,2739},{20,2698,4333,2700}};*/\n\t\tpublic int[] skillCapes = {9747,9753,9750,9768,9756,9759,9762,9801,9807,9783,9798,9804,9780,9795,9792,9774,9771,9777,9786,9810,9765,9948,12169,18508};\n\t\tpublic int get99Count() {\n\t\t\tint count = 0;\n\t\t\tfor (int j = 0; j < c.playerLevel.length; j++) {\n\t\t\t\tif (c.getLevelForXP(c.playerXP[j]) >= 99) {\n\t\t\t\t\tcount++;\t\t\t\t\n\t\t\t\t}\t\t\t\n\t\t\t}\t\t\n\t\t\treturn count;\n\t\t}\n\t\t\n\t\tpublic void setupSkillCapes(int capes, int capes2) {\n\t\t\tsynchronized(c) {\n\t\t\t\tc.getItems().resetItems(3823);\n\t\t\t\tc.isShopping = true;\n\t\t\t\tc.myShopId = 14;\n\t\t\t\tc.getPA().sendFrame248(3824, 3822);\n\t\t\t\tc.getPA().sendFrame126(\"Skillcape Shop\", 3901);\n\t\t\t\t\n\t\t\t\tint TotalItems = 0;\n\t\t\t\tTotalItems = capes2;\n\t\t\t\tif (TotalItems > Server.shopHandler.MaxShopItems) {\n\t\t\t\t\tTotalItems = Server.shopHandler.MaxShopItems;\n\t\t\t\t}\n\t\t\t\tc.getOutStream().createFrameVarSizeWord(53);\n\t\t\t\tc.getOutStream().writeWord(3900);\n\t\t\t\tc.getOutStream().writeWord(TotalItems);\n\t\t\t\tint TotalCount = 0;\n\t\t\t\tfor (int i = 0; i < 24; i++) {\n\t\t\t\t\tif (c.getLevelForXP(c.playerXP[i]) < 99)\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\tc.getOutStream().writeByte(1);\n\t\t\t\t\tc.getOutStream().writeWordBigEndianA(skillCapes[i] + 2);\n\t\t\t\t\tTotalCount++;\n\t\t\t\t}\n\t\t\t\tc.getOutStream().endFrameVarSizeWord();\n\t\t\t\tc.flushOutStream();\t\n\t\t\t}\n\t\t}\n\t\t\n\t\tpublic void skillBuy(int item) {\n\t\t\tint nn = get99Count();\n\t\t\tif (nn > 1)\n\t\t\t\tnn = 1;\n\t\t\telse\n\t\t\t\tnn = 0;\t\t\t\n\t\t\tfor (int j = 0; j < skillCapes.length; j++) {\n\t\t\t\tif (skillCapes[j] == item || skillCapes[j]+1 == item) {\n\t\t\t\t\tif (c.getItems().freeSlots() > 1) {\n\t\t\t\t\t\tif (c.getItems().playerHasItem(995,99000)) {\n\t\t\t\t\t\t\tif (c.getLevelForXP(c.playerXP[j]) >= 99) {\n\t\t\t\t\t\t\t\tc.getItems().deleteItem(995, c.getItems().getItemSlot(995), 99000);\n\t\t\t\t\t\t\t\tc.getItems().addItem(skillCapes[j] + nn,1);\n\t\t\t\t\t\t\t\tc.getItems().addItem(skillCapes[j] + 2,1);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tc.sendMessage(\"You must have 99 in the skill of the cape you're trying to buy.\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tc.sendMessage(\"You need 99k to buy this item.\");\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tc.sendMessage(\"You must have at least 1 inventory spaces to buy this item.\");\t\t\t\t\t\n\t\t\t\t\t}\t\t\t\t\n\t\t\t\t}\n\t\t\t\t/*if (skillCapes[j][1 + nn] == item) {\n\t\t\t\t\tif (c.getItems().freeSlots() >= 1) {\n\t\t\t\t\t\tif (c.getItems().playerHasItem(995,99000)) {\n\t\t\t\t\t\t\tif (c.getLevelForXP(c.playerXP[j]) >= 99) {\n\t\t\t\t\t\t\t\tc.getItems().deleteItem(995, c.getItems().getItemSlot(995), 99000);\n\t\t\t\t\t\t\t\tc.getItems().addItem(skillCapes[j] + nn,1);\n\t\t\t\t\t\t\t\tc.getItems().addItem(skillCapes[j] + 2,1);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tc.sendMessage(\"You must have 99 in the skill of the cape you're trying to buy.\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tc.sendMessage(\"You need 99k to buy this item.\");\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tc.sendMessage(\"You must have at least 1 inventory spaces to buy this item.\");\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\t\t\t\t\n\t\t\t\t}*/\t\t\t\n\t\t\t}\n\t\t\tc.getItems().resetItems(3823);\t\t\t\n\t\t}\n\t\t\n\t\tpublic void openVoid() {\n\t\t\t/*synchronized(c) {\n\t\t\t\tc.getItems().resetItems(3823);\n\t\t\t\tc.isShopping = true;\n\t\t\t\tc.myShopId = 15;\n\t\t\t\tc.getPA().sendFrame248(3824, 3822);\n\t\t\t\tc.getPA().sendFrame126(\"Void Recovery\", 3901);\n\t\t\t\t\n\t\t\t\tint TotalItems = 5;\n\t\t\t\tc.getOutStream().createFrameVarSizeWord(53);\n\t\t\t\tc.getOutStream().writeWord(3900);\n\t\t\t\tc.getOutStream().writeWord(TotalItems);\n\t\t\t\tfor (int i = 0; i < c.voidStatus.length; i++) {\n\t\t\t\t\tc.getOutStream().writeByte(c.voidStatus[i]);\n\t\t\t\t\tc.getOutStream().writeWordBigEndianA(2519 + i * 2);\n\t\t\t\t}\n\t\t\t\tc.getOutStream().endFrameVarSizeWord();\n\t\t\t\tc.flushOutStream();\t\n\t\t\t}*/\t\t\n\t\t}\n\n\t\tpublic void buyVoid(int item) {\n\t\t\t/*if (item > 2527 || item < 2518)\n\t\t\t\treturn;\n\t\t\t//c.sendMessage(\"\" + item);\n\t\t\tif (c.voidStatus[(item-2518)/2] > 0) {\n\t\t\t\tif (c.getItems().freeSlots() >= 1) {\n\t\t\t\t\tif (c.getItems().playerHasItem(995,c.getItems().getUntradePrice(item))) {\n\t\t\t\t\t\tc.voidStatus[(item-2518)/2]--;\n\t\t\t\t\t\tc.getItems().deleteItem(995,c.getItems().getItemSlot(995), c.getItems().getUntradePrice(item));\n\t\t\t\t\t\tc.getItems().addItem(item,1);\n\t\t\t\t\t\topenVoid();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tc.sendMessage(\"This item costs \" + c.getItems().getUntradePrice(item) + \" coins to rebuy.\");\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tc.sendMessage(\"I should have a free inventory space.\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tc.sendMessage(\"I don't need to recover this item from the void knights.\");\n\t\t\t}*/\n\t\t}\n\n\n}",
 "title": ""
}