{
 "espireDate": "10M",
 "format": "text",
 "jSonReasons": [
  "kw_pastebin",
  "re_php",
  "re_sql",
  "re_url",
  "re_css",
  "lg_en",
  "kw_operations",
  "re_ast1"
 ],
 "key": "m68mh2rE",
 "pasteDate": "Feb 18, 2018, 10:36:49 AM",
 "relevancy": -2.0,
 "relevant": false,
 "text": "// ==UserScript==\n// @name         ForumManager\n// @version      1.0.1\n// @description  Rozszerza standardowe forum\n// @author       Slupik98\n// @downloadURL  http://pastebin.com/raw/bFFzyA2Z\n// @updateURL    http://pastebin.com/raw/bFFzyA2Z\n// @match\t\t https://*.plemiona.pl/game.php?village=*&screen=forum*\n// @match\t\t http://*.plemiona.pl/game.php?village=*&screen=forum*\n// ==/UserScript==\n\n$.getScript('https://gitcdn.xyz/repo/Slupik/TribalWars/master/SlupioScriptSettings/maincode.js');\n\nif (!('contains' in String.prototype)) {\n    String.prototype.contains = function (str, startIndex) {\n        return -1 !== String.prototype.indexOf.call(this, str, startIndex);\n    };\n};\nif (!('replaceAll' in String.prototype)) {\n\tString.prototype.replaceAll = function (token, newToken, ignoreCase) {\n\t\tvar _token;\n\t\tvar str = this + \"\";\n\t\tvar i = -1;\n\n\t\tif (typeof token === \"string\") {\n\t\t\tif (ignoreCase) {\n\t\t\t\t_token = token.toLowerCase();\n\n\t\t\t\twhile ((\n\t\t\t\t\ti = str.toLowerCase().indexOf(\n\t\t\t\t\t\t_token, i >= 0 ? i + newToken.length : 0\n\t\t\t\t\t)\n\t\t\t\t) !== -1\n\t\t\t\t) {\n\t\t\t\t\tstr = str.substring(0, i) +\n\t\t\t\t\t\tnewToken +\n\t\t\t\t\t\tstr.substring(i + token.length);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn this.split(token).join(newToken);\n\t\t\t}\n\t\t}\n\t\treturn str;\n\t};\n};\nFM_COOKIE_MANAGER = {\n\tHIDDEN_DEPARTMENTS_COOKIE_NAME: 'FM_Departments',//Departments - dziay\n\tcreateCookie: function (name, decodedData, days) {\n\t\tvar encodedData = window.btoa(decodedData);\n\n\t\tvar value = encodedData;\n        var expires;\n\t\tif (days) {\n\t\t\tvar date = new Date();\n\t\t\tdate.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n\t\t\texpires = \"; expires=\" + date.toGMTString();\n\t\t}\n\t\telse expires = \"\";\n\t\tdocument.cookie = name + \"=\" + value + expires + \"; path=/\";\n\t},\n\tgetCookie: function (name) {\n\t\tvar nameEQ = name + \"=\";\n\t\tvar ca = document.cookie.split(';');\n\t\tfor (var i = 0; i < ca.length; i++) {\n\t\t\tvar c = ca[i];\n\t\t\twhile (c.charAt(0) == ' ') c = c.substring(1, c.length);\n\n\t\t\tif (c.indexOf(nameEQ) === 0) {\n\t\t\t\tvar encodedData = c.substring(nameEQ.length, c.length);\n\t\t\t\tvar decodedData = window.atob(encodedData);\n\t\t\t\treturn decodedData;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t},\n\tdeleteCookie: function (name) {\n\t\tdocument.createCookie(name, \"\", -1);\n\t},\n\tsaveHiddenDepartments: function (dataObject) {\n\t\tvar dataJSON = JSON.stringify(dataObject);\n\t\tFM_COOKIE_MANAGER.createCookie(FM_COOKIE_MANAGER.HIDDEN_DEPARTMENTS_COOKIE_NAME, dataJSON, 1000);\n\t},\n\tgetHiddenDepartments: function () {\n\t\tvar dataJSON = FM_COOKIE_MANAGER.getCookie(FM_COOKIE_MANAGER.HIDDEN_DEPARTMENTS_COOKIE_NAME);\n\t\tvar dataObject = JSON.parse(dataJSON);\n\t\tif (dataObject === null) {\n\t\t\tdataObject = [];\n\t\t}\n\t\treturn dataObject;\n\t}\n};\nFM_CSS = {\n\tsetAllStyles: function () {\n\t\tFM_CSS.setTagStyles();\n\t\tFM_CSS.setShowerButtonStyle();\n\t},\n\tsetTagStyles: function () {\n\t\tvar cssPrefix = '.prefix {' + '\\n' +\n\t\t\t'\tvertical-align: middle;' + '\\n' +\n\t\t\t'\tdisplay: inline-block;' + '\\n' +\n\t\t\t'\theight: 16px;' + '\\n' +\n\t\t\t'\tline-height: 16px;' + '\\n' +\n\t\t\t'\tfont-size: 9px;' + '\\n' +\n\t\t\t'\tfont-weight: bold;' + '\\n' +\n\t\t\t'\ttext-transform: uppercase;' + '\\n' +\n\t\t\t'\ttext-shadow: rgba(0,0,0,0.2) 0px -1px 0px;' + '\\n' +\n\t\t\t'\t-moz-border-radius: 3px;' + '\\n' +\n\t\t\t'\t-webkit-border-radius: 3px;' + '\\n' +\n\t\t\t'\tborder-radius: 3px;' + '\\n' +\n\t\t\t'\tbackground-repeat: repeat-x;' + '\\n' +\n\t\t\t'\tcolor: #fff!important;' + '\\n' +\n\t\t\t'\tpadding: 3px 9px;' + '\\n' +\n\t\t\t//'\tbackground: #c1a264' + '\\n' +//It is in style for every element\n\t\t\t'}';\n\t\tFM_CSS.setStyle(cssPrefix);\n\t\tvar importantTopic = '.importantTopic {' + '\\n' +\n\t\t\t'\tbackground: #c1a264 url(https://dspl.innogamescdn.com/8.57.1/30830/graphic/screen/tableheader_bg3.png) repeat-x;' + '\\n' +\n\t\t\t'\tbackground-clip: padding-box;' + '\\n' +\n\t\t\t'\tpadding: 3px;' + '\\n' +\n\t\t\t'\tbox-sizing: border-box;' + '\\n' +\n\t\t\t'\theight: 23px;' + '\\n' +\n\t\t\t'\tborder-top-left-radius: 3px;' + '\\n' +\n\t\t\t'\tborder-top-right-radius: 3px;' + '\\n' +\n\t\t\t'\tborder-bottom-right-radius: 3px;' + '\\n' +\n\t\t\t'\tborder-bottom-left-radius: 3px;' + '\\n' +\n\t\t\t'\tcursor: pointer;' + '\\n' +\n\t\t\t'\tfont-weight: bold;' + '\\n' +\n\t\t\t'}';\n\t\tFM_CSS.setStyle(importantTopic);\n\t},\n\tsetShowerButtonStyle: function () {\n\t\tvar cssBtn = '.showerBtn {' + '\\n' +\n\t\t\t'    display: inline-block;' + '\\n' +\n\t\t\t'    background-color: #c6f9b1;' + '\\n' +\n\t\t\t'    margin-bottom: 4px;' + '\\n' +\n\t\t\t'    padding: 1px;' + '\\n' +\n\t\t\t'    border: 1px solid #000;' + '\\n' +\n\t\t\t'\tborder-radius: 2px;' + '\\n' +\n\t\t\t'    white-space: nowrap;' + '\\n' +\n\t\t\t'    line-height: 130%;' + '\\n' +\n\t\t\t'\ttext-shadow: rgba(0,0,0,0.2) 0px -1px 0px;' + '\\n' +\n\t\t\t'}';\n\t\tFM_CSS.setStyle(cssBtn);\n\t},\n\tsetStyle: function (code) {\n\t\tvar styleElement = document.createElement(\"style\");\n\t\tstyleElement.innerHTML = code;\n\t\tdocument.getElementsByTagName(\"head\")[0].appendChild(styleElement);\n\t}\n};\nFM_SETTER = {\n\tTOPIC_ROW_NAME: 'topicRowName',\n\tsetTopicRowNames: function () {\n\t\tvar forumBox = document.getElementById('forum_box');\n\t\tvar forumContainer = forumBox.children[0];\n\t\tvar forumContent = forumContainer.children[2];\n\t\tvar form = forumContent.children[1];\n\t\tvar table = form.children[0];\n\t\tvar topicRows = table.rows;\n\t\tfor (var i = 1; i < topicRows.length - 1; i++) {\n\t\t\tvar singleTopicRow = topicRows[i];\n\t\t\tsingleTopicRow.setAttribute('name', FM_SETTER.TOPIC_ROW_NAME);\n\t\t}\n\t}\n};\nFM_TAGS = {\n\tsetTags: function () {\n\t\tvar rows = document.getElementsByName(FM_SETTER.TOPIC_ROW_NAME);\n\t\tfor (var i = 0; i < rows.length; i++) {\n\t\t\tvar row = rows[i];\n\t\t\tFM_TAGS.setTagsForRow(row);\n\t\t}\n\t},\n\tsetTagsForRow: function (row) {\n\t\tvar title = row.children[0];\n\t\tvar href = FM_TAGS.getHrefFromTitle(title);\n\t\tvar tags = FM_TAGS.getTags(href.textContent);\n\t\tvar spaceToAdd = false;\n\n\t\tif (FM_TAGS.containsPreffixImportant(title)) {\n\t\t\tvar text = title.children[2].textContent.replaceAll(':', '!');\n\t\t\tvar importantPrefix = FM_TAGS.getImportantTag(text);\n\t\t\tif (title.children.length === 5) {\n\t\t\t\ttitle.insertBefore(importantPrefix, title.childNodes[title.childNodes.length - 5]);\n\t\t\t} else {\n\t\t\t\ttitle.insertBefore(importantPrefix, title.childNodes[title.childNodes.length - 3]);\n\t\t\t}\n\t\t\ttitle.children[2].remove();\n\t\t}\n\n\t\tfor (var i = 0; i < tags.length; i++) {\n\t\t\tvar tagText = tags[i];\n\t\t\tvar formatedTag = FM_TAGS.getFormatedTag(tagText);\n\n\t\t\ttitle.insertBefore(formatedTag, title.childNodes[5 + i]);\n\t\t\thref.textContent = href.textContent.replaceAll(tagText, '');\n\n\t\t\tspaceToAdd = true;\n\t\t}\n\t\tif (spaceToAdd) {\n\t\t\tvar space = document.createTextNode(\" \");\n\t\t\ttitle.insertBefore(space, title.childNodes[6 + (tags.length - 1)]);\n\t\t\thref.textContent = href.textContent.trim();\n\t\t}\n\t},\n\tgetImportantTag: function (tagText) {\n\t\tvar spanElement = document.createElement(\"SPAN\");\n\t\ttagText = tagText.toUpperCase();\n\t\tspanElement.textContent = tagText;\n\t\tspanElement.setAttribute('class', 'importantTopic');\n\t\treturn spanElement;\n\t},\n\tgetFormatedTag: function (tagText) {\n\t\tvar spanElement = document.createElement(\"SPAN\");\n\t\ttagText = tagText.toUpperCase();\n\t\tspanElement.textContent = tagText;\n\t\tspanElement.setAttribute('class', 'prefix');\n\t\tspanElement.setAttribute('style', 'background: ' + FM_TAGS.getTagColour(tagText));\n\t\treturn spanElement;\n\t},\n\tgetTagColour: function (tagText) {\n\t\tswitch (tagText) {\n\t\t\tcase '[I don\\'t have any idea]':\n\t\t\t\treturn '#c1a264';\n\t\t\tdefault:\n\t\t\t\tvar word = tagText.substring(1, tagText.length);\n\t\t\t\tvar md5Code = md5(word);\n\t\t\t\tvar colour = '#' + md5Code.substring(0, 6);\n\t\t\t\treturn colour;\n\t\t}\n\t},\n\tgetTags: function (text) {\n\t\tvar preElements = text.split(']');\n\t\tvar tags = [];\n\t\tfor (var i = 0; i < preElements.length; i++) {\n\t\t\tvar probablyTag = preElements[i];\n\t\t\tprobablyTag = probablyTag.trim();\n\t\t\tif (probablyTag.startsWith('[')) {\n\t\t\t\tvar tag = probablyTag + ']';\n\t\t\t\ttag = tag.trim();\n\t\t\t\ttags.push(tag);\n\t\t\t}\n\t\t}\n\t\treturn tags;\n\t},\n\tgetHrefFromTitle: function (title) {\n\t\tvar href = title.children[2];\n\t\tif (FM_TAGS.containsPreffixImportant(title)) {\n\t\t\thref = title.children[3];\n\t\t}\n\t\treturn href;\n\t},\n\tcontainsPreffixImportant: function (title) {\n\t\tvar titleElements = title.children;\n\t\tif (titleElements[2].nodeName == \"STRONG\") {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n};\nFM_DEPARTMENTS_SHOWER = {\n\tgetButton: function () {\n\t\tvar btn = document.createElement('BUTTON');\n\t\tbtn.setAttribute('class', 'showerBtn');\n\t\t//var text = document.createTextNode(\"Poka ukryte fora\");\n\t\tvar text = document.createElement('A');\n\t\ttext.textContent = \"Poka ukryte fora\";\n\t\tbtn.appendChild(text);\n\t\tbtn.setAttribute('id', 'btnShowHiddenDepartments')\n\t\treturn btn;\n\t},\n\tonShowHiddenDepartments: function () {\n\t\tdocument.getElementById('btnShowHiddenDepartments').remove();\n\t\tFM_DEPARTMENTS_SHOWER.showHiddenDepartments();\n\t},\n\tshowHiddenDepartments: function () {\n\t\tvar code = '';\n\t\tvar hiddenDepartments = FM_DEPARTMENTS_HIDDER.hiddenDepartments;\n\t\tFM_DEPARTMENTS_HIDDER.hiddenDepartments = [];\n\t\tfor (var i = 0; i < hiddenDepartments.length; i++) {\n\t\t\tvar space = document.createTextNode(\" \");\n\t\t\tcode += hiddenDepartments[i].outerHTML + space.textContent;\n\t\t}\n\n\t\tvar forumContainer = document.getElementsByClassName('forum-container')[0];\n\t\tvar mainDiv = forumContainer.children[0];\n\t\tmainDiv.innerHTML += code;\n\t}\n}\nFM_DEPARTMENTS_HIDDER = {\n\thiddenDepartments: [],\n\thideHiddenDepartments: function () {\n\t\tvar forumContainer = document.getElementsByClassName('forum-container')[0];\n\t\tvar mainDiv = forumContainer.children[0];\n\t\tvar allDepartments = mainDiv.children;\n\t\tvar departmentsToHide = FM_COOKIE_MANAGER.getHiddenDepartments();// ['32696'];\n\n\t\tvar code = '';\n\t\tfor (var i = 0; i < allDepartments.length; i++) {\n\t\t\tvar department = allDepartments[i];\n\t\t\tvar id = FM_DEPARTMENTS_HIDDER.getDepartmentID(department);\n\t\t\tif (departmentsToHide.includes(id) && !department.getAttribute('class').contains('selected')) {\n\t\t\t\t//FM_DEPARTMENTS_HIDDER.hiddenDepartments.push(department.outerHTML);\n\t\t\t\tFM_DEPARTMENTS_HIDDER.hiddenDepartments.push(department);\n\t\t\t} else {\n\t\t\t\tvar space = document.createTextNode(\" \");\n\t\t\t\tvar codePart = department.outerHTML + space.textContent;\n\t\t\t\tcode += codePart;\n\t\t\t}\n\t\t}\n\t\tcode += FM_DEPARTMENTS_SHOWER.getButton().outerHTML;\n\n\t\tvar newDIV = document.createElement('DIV');\n\t\tnewDIV.innerHTML = code;\n\t\tmainDiv.outerHTML = newDIV.outerHTML;\n\n\t\tdocument.getElementById('btnShowHiddenDepartments').addEventListener('click', function () {\n\t\t\tconsole.log('clicked!');\n\t\t\tFM_DEPARTMENTS_SHOWER.onShowHiddenDepartments();\n\t\t});\n\t},\n\tgetDepartmentID: function (department) {\n\t\tvar hrefElement = department.children[0];\n\t\tvar href = hrefElement.getAttribute('href');\n\n\t\tvar ID = href.split('forum_id=')[1];\n\t\treturn ID;\n\t}\n};\nFM_APPLET_MANAGER = {\n\tloadApplet: function () {\n\t\tvar forumContent = document.getElementsByClassName('forum-content')[0];\n\t\tvar table = forumContent.children[0];\n\t\tvar tbody = table.children[0];\n\t\tvar hrefRow = tbody.children[0];\n\t\tvar hrefCell = hrefRow.children[hrefRow.children.length - 1];\n\n\t\tvar code = '<a id=\"appletHideDepartment\" href=\"#\" style=\"font-size: 10px;\">' + '\\n';\n\t\tif (FM_APPLET_MANAGER.isActualDepartmentHidden()) {\n\t\t\tcode += ' Odkryj to forum' + '\\n';\n\t\t} else {\n\t\t\tcode += ' Ukryj to forum' + '\\n';\n\t\t}\n\t\tcode += '<a>';\n\t\threfCell.innerHTML += code;\n\t\tdocument.getElementById('appletHideDepartment').addEventListener('click', function () {\n\t\t\tFM_APPLET_MANAGER.onHideForum();\n\t\t});\n\t},\n\tonHideForum: function () {\n\t\tvar id = FM_APPLET_MANAGER.getActualDepartmentID();\n\t\tvar hiddenList = FM_COOKIE_MANAGER.getHiddenDepartments();\n\t\tvar applet = document.getElementById('appletHideDepartment');\n\n\t\tif (FM_APPLET_MANAGER.isActualDepartmentHidden()) {\n\t\t\tapplet.innerText = ' Ukryj to forum' + '\\n';\n\t\t\thiddenList.splice(hiddenList.indexOf(id), 1);\n\t\t} else {\n\t\t\tapplet.innerText = ' Odkryj to forum' + '\\n';\n\t\t\thiddenList[hiddenList.length] = id;\n\t\t}\n\t\tFM_COOKIE_MANAGER.saveHiddenDepartments(hiddenList);\n\n\t\tFM_DEPARTMENTS_SHOWER.onShowHiddenDepartments();\n\t\tFM_DEPARTMENTS_HIDDER.hideHiddenDepartments();\n\t},\n\tgetActualDepartmentID: function () {\n\t\tvar departmentRow = document.getElementsByClassName('shared_selected');\n\t\tif (departmentRow.length === 0) {\n\t\t\tdepartmentRow = document.getElementsByClassName('forum selected')[0];\n\t\t} else {\n\t\t\tdepartmentRow = departmentRow[0];\n\t\t}\n\t\tvar id = FM_DEPARTMENTS_HIDDER.getDepartmentID(departmentRow);\n\t\treturn id;\n\t},\n\tisActualDepartmentHidden: function () {\n\t\tvar hiddenList = FM_COOKIE_MANAGER.getHiddenDepartments();\n\t\tvar id = FM_APPLET_MANAGER.getActualDepartmentID();\n\t\treturn hiddenList.includes(id);\n\t}\n};\nFM_DISTANCE_SETTER = {\n\tsetVillagesDistance: function () {\n\t\tvar rows = document.getElementsByName(FM_SETTER.TOPIC_ROW_NAME);\n\t\tvar howManyEdited = 0;\n\t\tfor (var i = 0; i < rows.length; i++) {\n\t\t\tvar row = rows[i];\n\t\t\tif(FM_DISTANCE_SETTER.setDistanceForRow(row)){\n\t\t\t\thowManyEdited++;\n\t\t\t}\n\t\t}\n\t\tif(howManyEdited>20){\n\t\t\tFM_GAME.setBiggerWindow();\n\t\t}\n\t},\n\tsetDistanceForRow: function (row) {\n\t\tvar title = row.children[0];\n\t\tvar hrefElement = FM_TAGS.getHrefFromTitle(title);\n\t\tvar href = hrefElement.innerHTML;\n\n\t\tvar hrefParts = href.split(' ');\n\t\tvar edited = false;\n\t\tfor (var i = 0; i < hrefParts.length; i++) {\n\t\t\tvar part = hrefParts[i];\n\n\t\t\tif (FM_DISTANCE_SETTER.isThisCoords(part)) {\n\t\t\t\tpart = part.trim();\n\t\t\t\tvar x = parseInt(part.split('|')[0]);\n\t\t\t\tvar y = parseInt(part.split('|')[1]);\n\t\t\t\tvar distance = FM_DISTANCE_SETTER.getDistanceFromActualVillage(x, y);\n\t\t\t\tdistance = Math.round(distance);\n\t\t\t\tvar code = part + '<font size=\"1\"><i>(Odlego: ' + distance + ')</i></font>';\n\t\t\t\thref = href.replaceAll(part, code);\n\t\t\t\tedited = true;\n\t\t\t}\n\t\t}\n\t\threfElement.innerHTML = href;\n\t\treturn edited;\n\t\t//console.log(href);\n\t},\n\tisThisCoords: function (text) {\n\t\tvar match = text.match(/^([0-9]{1,3})\\|([0-9]{1,3})$/);\n\t\treturn (match !== null);\n\t},\n\tgetDistanceFromActualVillage: function (x, y) {\n\t\tvar ownVillage = {\n\t\t\tx: game_data.village.x,\n\t\t\ty: game_data.village.y\n\t\t};\n\t\tvar tartgetVillage = {\n\t\t\tx: x,\n\t\t\ty: y\n\t\t}\n\t\treturn FM_DISTANCE_SETTER.getDistance(ownVillage, tartgetVillage);\n\t},\n\tgetDistance: function (v1, v2) {\n\t\treturn Math.sqrt(\n\t\t\t(Math.pow(\n\t\t\t\t(v1.x - v2.x), 2\n\t\t\t) +\n\t\t\t\tMath.pow(\n\t\t\t\t\t(v1.y - v2.y), 2\n\t\t\t\t)\n\t\t\t));\n\t}\n};\nFM_LOADER = {\n\tpreloader: function () {\n\t\tsetTimeout(function () {\n\t\t\tif (FM_LOADER.canRun()) {\n\t\t\t\tFM_LOADER.load();\n\t\t\t} else {\n\t\t\t\tFM_LOADER.preloader();\n\t\t\t}\n\t\t}, 10);\n\t},\n\tcanRun: function () {\n\t\tif (game_data.screen.toLowerCase() === 'forum') {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\tload: function () {\n\t\t//load basic settings\n\t\tif (!window.location.search.contains('&thread_id=')) {\n\t\t\tFM_SETTER.setTopicRowNames();\n\t\t}\n\t\tFM_CSS.setAllStyles();\n\n\t\t//load others settings\n\t\tFM_DEPARTMENTS_HIDDER.hideHiddenDepartments();\n\t\tFM_APPLET_MANAGER.loadApplet();\n\t\tif (!window.location.search.contains('&thread_id=')) {\n\t\t\tFM_DISTANCE_SETTER.setVillagesDistance();//must be first because function below modify html code so hard\n\t\t\tFM_TAGS.setTags();\n\t\t}\n\t}\n};\nFM_GAME = {\n\tsetBiggerWindow: function(){\n\t\tvar mainCell = document.getElementsByClassName('maincell')[0];\n\t\tmainCell.setAttribute('style', 'width: 1000px;')\n\t}\n};\n//md5\n(function ($) {\n\t/*\n\t * JavaScript MD5\n\t * https://github.com/blueimp/JavaScript-MD5\n\t *\n\t * Copyright 2011, Sebastian Tschan\n\t * https://blueimp.net\n\t *\n\t * Licensed under the MIT license:\n\t * http://www.opensource.org/licenses/MIT\n\t *\n\t * Based on\n\t * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n\t * Digest Algorithm, as defined in RFC 1321.\n\t * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n\t * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n\t * Distributed under the BSD License\n\t * See http://pajhome.org.uk/crypt/md5 for more info.\n\t */\n\n\t/* global define */\n\n\t'use strict'\n\n\t/*\n\t* Add integers, wrapping at 2^32. This uses 16-bit operations internally\n\t* to work around bugs in some JS interpreters.\n\t*/\n\tfunction safeAdd(x, y) {\n\t\tvar lsw = (x & 0xFFFF) + (y & 0xFFFF)\n\t\tvar msw = (x >> 16) + (y >> 16) + (lsw >> 16)\n\t\treturn (msw << 16) | (lsw & 0xFFFF)\n\t}\n\n\t/*\n\t* Bitwise rotate a 32-bit number to the left.\n\t*/\n\tfunction bitRotateLeft(num, cnt) {\n\t\treturn (num << cnt) | (num >>> (32 - cnt))\n\t}\n\n\t/*\n\t* These functions implement the four basic operations the algorithm uses.\n\t*/\n\tfunction md5cmn(q, a, b, x, s, t) {\n\t\treturn safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b)\n\t}\n\tfunction md5ff(a, b, c, d, x, s, t) {\n\t\treturn md5cmn((b & c) | ((~b) & d), a, b, x, s, t)\n\t}\n\tfunction md5gg(a, b, c, d, x, s, t) {\n\t\treturn md5cmn((b & d) | (c & (~d)), a, b, x, s, t)\n\t}\n\tfunction md5hh(a, b, c, d, x, s, t) {\n\t\treturn md5cmn(b ^ c ^ d, a, b, x, s, t)\n\t}\n\tfunction md5ii(a, b, c, d, x, s, t) {\n\t\treturn md5cmn(c ^ (b | (~d)), a, b, x, s, t)\n\t}\n\n\t/*\n\t* Calculate the MD5 of an array of little-endian words, and a bit length.\n\t*/\n\tfunction binlMD5(x, len) {\n\t\t/* append padding */\n\t\tx[len >> 5] |= 0x80 << (len % 32)\n\t\tx[(((len + 64) >>> 9) << 4) + 14] = len\n\n\t\tvar i\n\t\tvar olda\n\t\tvar oldb\n\t\tvar oldc\n\t\tvar oldd\n\t\tvar a = 1732584193\n\t\tvar b = -271733879\n\t\tvar c = -1732584194\n\t\tvar d = 271733878\n\n\t\tfor (i = 0; i < x.length; i += 16) {\n\t\t\tolda = a\n\t\t\toldb = b\n\t\t\toldc = c\n\t\t\toldd = d\n\n\t\t\ta = md5ff(a, b, c, d, x[i], 7, -680876936)\n\t\t\td = md5ff(d, a, b, c, x[i + 1], 12, -389564586)\n\t\t\tc = md5ff(c, d, a, b, x[i + 2], 17, 606105819)\n\t\t\tb = md5ff(b, c, d, a, x[i + 3], 22, -1044525330)\n\t\t\ta = md5ff(a, b, c, d, x[i + 4], 7, -176418897)\n\t\t\td = md5ff(d, a, b, c, x[i + 5], 12, 1200080426)\n\t\t\tc = md5ff(c, d, a, b, x[i + 6], 17, -1473231341)\n\t\t\tb = md5ff(b, c, d, a, x[i + 7], 22, -45705983)\n\t\t\ta = md5ff(a, b, c, d, x[i + 8], 7, 1770035416)\n\t\t\td = md5ff(d, a, b, c, x[i + 9], 12, -1958414417)\n\t\t\tc = md5ff(c, d, a, b, x[i + 10], 17, -42063)\n\t\t\tb = md5ff(b, c, d, a, x[i + 11], 22, -1990404162)\n\t\t\ta = md5ff(a, b, c, d, x[i + 12], 7, 1804603682)\n\t\t\td = md5ff(d, a, b, c, x[i + 13], 12, -40341101)\n\t\t\tc = md5ff(c, d, a, b, x[i + 14], 17, -1502002290)\n\t\t\tb = md5ff(b, c, d, a, x[i + 15], 22, 1236535329)\n\n\t\t\ta = md5gg(a, b, c, d, x[i + 1], 5, -165796510)\n\t\t\td = md5gg(d, a, b, c, x[i + 6], 9, -1069501632)\n\t\t\tc = md5gg(c, d, a, b, x[i + 11], 14, 643717713)\n\t\t\tb = md5gg(b, c, d, a, x[i], 20, -373897302)\n\t\t\ta = md5gg(a, b, c, d, x[i + 5], 5, -701558691)\n\t\t\td = md5gg(d, a, b, c, x[i + 10], 9, 38016083)\n\t\t\tc = md5gg(c, d, a, b, x[i + 15], 14, -660478335)\n\t\t\tb = md5gg(b, c, d, a, x[i + 4], 20, -405537848)\n\t\t\ta = md5gg(a, b, c, d, x[i + 9], 5, 568446438)\n\t\t\td = md5gg(d, a, b, c, x[i + 14], 9, -1019803690)\n\t\t\tc = md5gg(c, d, a, b, x[i + 3], 14, -187363961)\n\t\t\tb = md5gg(b, c, d, a, x[i + 8], 20, 1163531501)\n\t\t\ta = md5gg(a, b, c, d, x[i + 13], 5, -1444681467)\n\t\t\td = md5gg(d, a, b, c, x[i + 2], 9, -51403784)\n\t\t\tc = md5gg(c, d, a, b, x[i + 7], 14, 1735328473)\n\t\t\tb = md5gg(b, c, d, a, x[i + 12], 20, -1926607734)\n\n\t\t\ta = md5hh(a, b, c, d, x[i + 5], 4, -378558)\n\t\t\td = md5hh(d, a, b, c, x[i + 8], 11, -2022574463)\n\t\t\tc = md5hh(c, d, a, b, x[i + 11], 16, 1839030562)\n\t\t\tb = md5hh(b, c, d, a, x[i + 14], 23, -35309556)\n\t\t\ta = md5hh(a, b, c, d, x[i + 1], 4, -1530992060)\n\t\t\td = md5hh(d, a, b, c, x[i + 4], 11, 1272893353)\n\t\t\tc = md5hh(c, d, a, b, x[i + 7], 16, -155497632)\n\t\t\tb = md5hh(b, c, d, a, x[i + 10], 23, -1094730640)\n\t\t\ta = md5hh(a, b, c, d, x[i + 13], 4, 681279174)\n\t\t\td = md5hh(d, a, b, c, x[i], 11, -358537222)\n\t\t\tc = md5hh(c, d, a, b, x[i + 3], 16, -722521979)\n\t\t\tb = md5hh(b, c, d, a, x[i + 6], 23, 76029189)\n\t\t\ta = md5hh(a, b, c, d, x[i + 9], 4, -640364487)\n\t\t\td = md5hh(d, a, b, c, x[i + 12], 11, -421815835)\n\t\t\tc = md5hh(c, d, a, b, x[i + 15], 16, 530742520)\n\t\t\tb = md5hh(b, c, d, a, x[i + 2], 23, -995338651)\n\n\t\t\ta = md5ii(a, b, c, d, x[i], 6, -198630844)\n\t\t\td = md5ii(d, a, b, c, x[i + 7], 10, 1126891415)\n\t\t\tc = md5ii(c, d, a, b, x[i + 14], 15, -1416354905)\n\t\t\tb = md5ii(b, c, d, a, x[i + 5], 21, -57434055)\n\t\t\ta = md5ii(a, b, c, d, x[i + 12], 6, 1700485571)\n\t\t\td = md5ii(d, a, b, c, x[i + 3], 10, -1894986606)\n\t\t\tc = md5ii(c, d, a, b, x[i + 10], 15, -1051523)\n\t\t\tb = md5ii(b, c, d, a, x[i + 1], 21, -2054922799)\n\t\t\ta = md5ii(a, b, c, d, x[i + 8], 6, 1873313359)\n\t\t\td = md5ii(d, a, b, c, x[i + 15], 10, -30611744)\n\t\t\tc = md5ii(c, d, a, b, x[i + 6], 15, -1560198380)\n\t\t\tb = md5ii(b, c, d, a, x[i + 13], 21, 1309151649)\n\t\t\ta = md5ii(a, b, c, d, x[i + 4], 6, -145523070)\n\t\t\td = md5ii(d, a, b, c, x[i + 11], 10, -1120210379)\n\t\t\tc = md5ii(c, d, a, b, x[i + 2], 15, 718787259)\n\t\t\tb = md5ii(b, c, d, a, x[i + 9], 21, -343485551)\n\n\t\t\ta = safeAdd(a, olda)\n\t\t\tb = safeAdd(b, oldb)\n\t\t\tc = safeAdd(c, oldc)\n\t\t\td = safeAdd(d, oldd)\n\t\t}\n\t\treturn [a, b, c, d]\n\t}\n\n\t/*\n\t* Convert an array of little-endian words to a string\n\t*/\n\tfunction binl2rstr(input) {\n\t\tvar i\n\t\tvar output = ''\n\t\tvar length32 = input.length * 32\n\t\tfor (i = 0; i < length32; i += 8) {\n\t\t\toutput += String.fromCharCode((input[i >> 5] >>> (i % 32)) & 0xFF)\n\t\t}\n\t\treturn output\n\t}\n\n\t/*\n\t* Convert a raw string to an array of little-endian words\n\t* Characters >255 have their high-byte silently ignored.\n\t*/\n\tfunction rstr2binl(input) {\n\t\tvar i\n\t\tvar output = []\n\t\toutput[(input.length >> 2) - 1] = undefined\n\t\tfor (i = 0; i < output.length; i += 1) {\n\t\t\toutput[i] = 0\n\t\t}\n\t\tvar length8 = input.length * 8\n\t\tfor (i = 0; i < length8; i += 8) {\n\t\t\toutput[i >> 5] |= (input.charCodeAt(i / 8) & 0xFF) << (i % 32)\n\t\t}\n\t\treturn output\n\t}\n\n\t/*\n\t* Calculate the MD5 of a raw string\n\t*/\n\tfunction rstrMD5(s) {\n\t\treturn binl2rstr(binlMD5(rstr2binl(s), s.length * 8))\n\t}\n\n\t/*\n\t* Calculate the HMAC-MD5, of a key and some data (raw strings)\n\t*/\n\tfunction rstrHMACMD5(key, data) {\n\t\tvar i\n\t\tvar bkey = rstr2binl(key)\n\t\tvar ipad = []\n\t\tvar opad = []\n\t\tvar hash\n\t\tipad[15] = opad[15] = undefined\n\t\tif (bkey.length > 16) {\n\t\t\tbkey = binlMD5(bkey, key.length * 8)\n\t\t}\n\t\tfor (i = 0; i < 16; i += 1) {\n\t\t\tipad[i] = bkey[i] ^ 0x36363636\n\t\t\topad[i] = bkey[i] ^ 0x5C5C5C5C\n\t\t}\n\t\thash = binlMD5(ipad.concat(rstr2binl(data)), 512 + data.length * 8)\n\t\treturn binl2rstr(binlMD5(opad.concat(hash), 512 + 128))\n\t}\n\n\t/*\n\t* Convert a raw string to a hex string\n\t*/\n\tfunction rstr2hex(input) {\n\t\tvar hexTab = '0123456789abcdef'\n\t\tvar output = ''\n\t\tvar x\n\t\tvar i\n\t\tfor (i = 0; i < input.length; i += 1) {\n\t\t\tx = input.charCodeAt(i)\n\t\t\toutput += hexTab.charAt((x >>> 4) & 0x0F) +\n\t\t\t\thexTab.charAt(x & 0x0F)\n\t\t}\n\t\treturn output\n\t}\n\n\t/*\n\t* Encode a string as utf-8\n\t*/\n\tfunction str2rstrUTF8(input) {\n\t\treturn unescape(encodeURIComponent(input))\n\t}\n\n\t/*\n\t* Take string arguments and return either raw or hex encoded strings\n\t*/\n\tfunction rawMD5(s) {\n\t\treturn rstrMD5(str2rstrUTF8(s))\n\t}\n\tfunction hexMD5(s) {\n\t\treturn rstr2hex(rawMD5(s))\n\t}\n\tfunction rawHMACMD5(k, d) {\n\t\treturn rstrHMACMD5(str2rstrUTF8(k), str2rstrUTF8(d))\n\t}\n\tfunction hexHMACMD5(k, d) {\n\t\treturn rstr2hex(rawHMACMD5(k, d))\n\t}\n\n\tfunction md5(string, key, raw) {\n\t\tif (!key) {\n\t\t\tif (!raw) {\n\t\t\t\treturn hexMD5(string)\n\t\t\t}\n\t\t\treturn rawMD5(string)\n\t\t}\n\t\tif (!raw) {\n\t\t\treturn hexHMACMD5(key, string)\n\t\t}\n\t\treturn rawHMACMD5(key, string)\n\t}\n\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(function () {\n\t\t\treturn md5\n\t\t})\n\t} else if (typeof module === 'object' && module.exports) {\n\t\tmodule.exports = md5\n\t} else {\n\t\t$.md5 = md5\n\t}\n} (this));\n//start script\nFM_LOADER.preloader();",
 "title": ""
}