{
 "espireDate": "N",
 "format": "text",
 "jSonReasons": [
  "kw_error",
  "lg_en"
 ],
 "key": "BrJMX0uS",
 "pasteDate": "Feb 26, 2018, 1:28:09 AM",
 "relevancy": 1.0,
 "relevant": false,
 "text": "package com.example.admin.presa;\n\nimport android.app.Activity;\nimport android.os.Bundle;\nimport android.view.KeyEvent;\nimport android.webkit.CookieManager;\nimport android.webkit.CookieSyncManager;\nimport android.webkit.WebResourceError;\nimport android.webkit.WebResourceRequest;\nimport android.webkit.WebSettings;\nimport android.webkit.WebView;\nimport android.webkit.WebViewClient;\nimport android.view.Menu;\nimport android.view.MenuItem;\nimport android.view.View;\nimport com.example.admin.presa.R;\n\n\npublic class MainActivity extends Activity {\n\nprivate WebView mWebView;\nprivate boolean clearHistory = true;\n\npublic void clearHistory(){\n    clearHistory=true;\n}\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    mWebView = (WebView) findViewById(R.id.activity_main_webview);\n\n    // Force links and redirects to open in the WebView instead of in a         \nbrowser\n    /*mWebView.setWebViewClient(new WebViewClient() {\n        public void onPageFinished(WebView view, String url)\n        {\n            if (clearHistory)\n            {\n                clearHistory = false;\n                mWebView.clearHistory();\n            }\n            super.onPageFinished(view, url);\n        }\n    });*/\n\nmWebView.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK);\n    mWebView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);\n    // Enable Javascript\n    WebSettings webSettings = mWebView.getSettings();\n\n    // Use remote resource\n    mWebView.getSettings().setBuiltInZoomControls(true);\n    mWebView.getSettings().setUseWideViewPort(true);\n    mWebView.getSettings().setJavaScriptEnabled(true);\n    mWebView.loadUrl(\"http://103.42.86.147/PRE16/Login.do?att=true\");\n    mWebView.clearHistory();\n    mWebView.clearCache(true);\n    mWebView.setFocusable(true);\n    mWebView.removeAllViews();\n    clearHistory = true;\n    mWebView.setWebViewClient\n            (\n                    new WebViewClient()\n                      {\n                          @Override\n                          public void onReceivedError(WebView view, \nWebResourceRequest request, WebResourceError\n                                  error)\n                          {\n                              setContentView(R.layout.activity_error);\n                          }\n\n                          public void onPageFinished(WebView view, String \nurl)\n                          {\n                              if (clearHistory)\n                              {\n                                  clearHistory = false;\n                                  mWebView.clearHistory();\n                              }\n                              super.onPageFinished(view, url);\n                          }\n                      }\n            );\n\n    // Stop local links and redirects from opening in browser instead of \n WebView\n    // mWebView.setWebViewClient(new MyAppWebViewClient());\n\n    // Use local resource\n    // mWebView.loadUrl(\"file:///android_asset/www/index.html\");\n}\n// Prevent the back-button from closing the app\n@Override\npublic void onBackPressed() {\n    if(mWebView.isFocused() && mWebView.canGoBack()) {\n        mWebView.goBack();\n        mWebView.reload();\n        mWebView.clearHistory();\n    } else {\n        super.onBackPressed();\n    }\n}\n\n@Override\npublic boolean onKeyDown(final int keyCode, final KeyEvent event) {\n    if ((keyCode == KeyEvent.KEYCODE_BACK) && mWebView.canGoBack()) {\n        mWebView.reload();\n        mWebView.clearHistory();\n        mWebView.goBack();\n        return true;\n    }\n    return super.onKeyDown(keyCode, event);\n}\n}\n\t\npackage com.example.admin.presa;\n\nimport android.content.Intent;\nimport android.net.Uri;\nimport android.webkit.WebView;\nimport android.webkit.WebViewClient;\n\npublic class MyAppWebViewClient extends WebViewClient {\n\n@Override\npublic boolean shouldOverrideUrlLoading(WebView view, String url) {\n    if (Uri.parse(url).getHost().endsWith(\"http://103.42.86.147/PRE16/Login.do?att=true\")) {\n        return false;\n    }\n\n    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));\n    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\n    view.getContext().startActivity(intent);\n    view.clearHistory();\n    view.clearCache(true);\n    view.reload();\n    return true;\n}\n}",
 "title": ""
}