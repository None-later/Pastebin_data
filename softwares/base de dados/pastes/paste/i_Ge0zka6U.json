{
 "espireDate": "N",
 "format": "text",
 "jSonReasons": [
  "lg_en",
  "kw_attack"
 ],
 "key": "Ge0zka6U",
 "pasteDate": "Feb 8, 2018, 7:39:37 PM",
 "relevancy": 1.0,
 "relevant": false,
 "text": "package com.elvarg.world.entity.impl.npc.customBosses;\n\nimport com.elvarg.definitions.WeaponInterfaces;\nimport com.elvarg.engine.task.Task;\nimport com.elvarg.engine.task.TaskManager;\nimport com.elvarg.util.Misc;\nimport com.elvarg.world.World;\nimport com.elvarg.world.entity.impl.npc.NPC;\nimport com.elvarg.world.entity.impl.npc.customBosses.combat.FirstBossCombat;\nimport com.elvarg.world.model.Flag;\nimport com.elvarg.world.model.Item;\nimport com.elvarg.world.model.Locations;\nimport com.elvarg.world.model.Position;\nimport com.elvarg.world.model.equipment.BonusManager;\n\npublic class FirstBoss extends Bosses {\n\n\t@Override\n\tpublic void startPhase() {\n\t\tswitch (getPhase()) {\n\t\tcase PHASE_1:\n\t\t\tTaskManager.submit(new Task(10, false) {\n\n\t\t\t\t@Override\n\t\t\t\tprotected void execute() {\n\t\t\t\t\tif (Locations.PLAYERS_IN_BOSS_1 == 0) {\n\t\t\t\t\t\tSystem.out.println(\"not enough players to continue phase.\");\n\t\t\t\t\t\tstop();\n\t\t\t\t\t}\n\t\t\t\t\tBOSSES.add(new NPC(Boss.BOSS_1, new Position(3052, 3492, 0)));\n\t\t\t\t\tWorld.getNpcAddQueue().addAll(BOSSES);\n\t\t\t\t\tstop();\n\t\t\t\t}\n\n\t\t\t\t@Override\n\t\t\t\tpublic void stop() {\n\t\t\t\t\tsuper.stop();\n\t\t\t\t}\n\t\t\t});\n\t\t\tbreak;\n\t\tcase PHASE_2:\n\t\t\tTaskManager.submit(new Task(10, false) {\n\t\t\t\t@Override\n\t\t\t\tprotected void execute() {\n\t\t\t\t\tif (Locations.PLAYERS_IN_BOSS_1 == 0) {\n\t\t\t\t\t\tstop();\n\t\t\t\t\t}\n\t\t\t\t\tfor (int i = 0; i < 1; i++) {\n\t\t\t\t\t\tint x = Misc.getRandom(2);\n\t\t\t\t\t\tint y = Misc.getRandom(2);\n\t\t\t\t\t\tMINIONS.add(new NPC(Boss.RNG_MINION,\n\t\t\t\t\t\t\t\tnew Position(x > 1 ? 3055 + x : 3055 - x, y > 3 ? 3490 + y : 3490 - y)));\n\t\t\t\t\t\t//MINIONS.add(new NPC(Boss.MAGE_MINION,\n\t\t\t\t\t\t\t\t//new Position(x > 1 ? 3050 + x : 3058 - x, y > 3 ? 3495 + y : 3485 - y)));\n\t\t\t\t\t\t//MINIONS.add(new NPC(Boss.MELEE_MINION,\n\t\t\t\t\t\t\t\t//new Position(x > 1 ? 3052 + x : 3050 - x, y > 3 ? 3492 + y : 3495 - y)));\n\t\t\t\t\t}\n\t\t\t\t\t// spawn boss in the back and doesnt move.\n\t\t\t\t\tBOSSES.add(new NPC(Boss.BOSS_1, new Position(3052, 3484, 0)));\n\t\t\t\t\tWorld.getNpcAddQueue().addAll(BOSSES);\n\t\t\t\t\tWorld.getNpcAddQueue().addAll(MINIONS);\n\t\t\t\t\tBoss.BOSS.get(Boss.BOSS_1).activateAbility();\n\t\t\t\t\tSystem.out.println(\"Bosses arraylist contains: \" + BOSSES.size() + \" npcs\");\n\t\t\t\t\tstop();\n\t\t\t\t}\n\n\t\t\t\t@Override\n\t\t\t\tpublic void stop() {\n\t\t\t\t\tsuper.stop();\n\t\t\t\t}\n\t\t\t});\n\t\t\t// spawn minions\n\n\t\t\tbreak;\n\t\tcase PHASE_3:\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t@Override\n\tpublic boolean canAttack() {\n\t\tSystem.out.println(this.getPhase() + \" phase\");\n\t\tif (this.getPhase() == Phase.PHASE_2) {\n\t\t\tSystem.out.println(\"Cant attack boss in this phase\");\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tpublic void activateAbility() {\n\t\tSystem.out.println(\"All the people in boss 1\");\n\t\tTaskManager.submit(new Task(30, true) {\n\n\t\t\t@Override\n\t\t\tprotected void execute() {\n\t\t\t\tBoss.BOSS.get(Boss.BOSS_1).PLAYERS_HERE.forEach(player -> {\n\t\t\t\t\tif (!player.getInventory().isFull()) {\n\t\t\t\t\t\tfinal int randomSlot = Misc.getRandom(player.getEquipment().capacity());\n\t\t\t\t\t\tfinal Item toDisarm = player.getEquipment().getItems()[randomSlot];\n\t\t\t\t\t\tif (toDisarm.isValid()) {\n\t\t\t\t\t\t\tplayer.getEquipment().set(randomSlot, new Item(-1, 0));\n\t\t\t\t\t\t\tplayer.getInventory().add(toDisarm);\n\t\t\t\t\t\t\tplayer.getPacketSender().sendMessage(\"You have been disarmed!\");\n\t\t\t\t\t\t\tWeaponInterfaces.assign(player);\n\t\t\t\t\t\t\tBonusManager.update(player);\n\t\t\t\t\t\t\tplayer.getUpdateFlag().flag(Flag.PLAYER_APPEARANCE);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif(getPhase() == Phase.PHASE_3) {\n\t\t\t\t\tSystem.out.println(\"Stoped ability\");\n\t\t\t\t\tstop();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t@Override\n\t\t\tpublic void stop() {\n\t\t\t\tsuper.stop();\n\t\t\t}\n\t\t});\n\n\t}\n\n\t@Override\n\tpublic void endPhase() {\n\t\tswitch (this.getPhase()) {\n\t\tcase PHASE_1:\n\t\t\tthis.setPhase(Phase.PHASE_2);\n\t\t\tbreak;\n\t\tcase PHASE_2:\n\t\t\tthis.setPhase(Phase.PHASE_3);\n\t\t\tbreak;\n\t\tcase PHASE_3:\n\t\t\t// end boss\n\t\t\t// create timer so the boss event cannot start for another 5 mins.\n\t\t\tbreak;\n\t\t}\n\t}\n}",
 "title": ""
}